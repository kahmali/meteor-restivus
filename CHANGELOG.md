# Change Log

## [v0.6.0] - 2015-02-17
**_WARNING!_ API-breaking changes! Please be aware when upgrading!**

#### Added
- `Restivus.addCollection()` method for generating CRUD endpoints for Mongo Collections. Please
  see README for detailed information on defining collection routes in Restivus.

#### Changed
- **Rename `Restivus.add()` to `Restivus.addRoute()` for clarity, now that `Restivus.addCollection()`
  has been added to API. _Warning! This is an API-breaking change!_**
- **Convert all responses generated by Restivus to [JSend] format. _Warning! This is an API-breaking
  change!_**
- README
  - Update and refactor README to include detailed information on new collection route features,
    including code examples and an all-new Quick Start example that also highlights the new
    Restivus.addCollection() method.
  - Add "Terminology" section to the README for clarification on a few key terms that are heavily
    used throughout the docs
  - Add section on upgrading from v0.5.x


## [v0.5.9] - 2015-02-16

#### Added
- Allow user-defined OPTIONS endpoints on routes

#### Changed
- README
  - Show support for OPTIONS endpoints in description and code examples in the
    [Defining Endpoints] section of README


## [v0.5.8] - 2015-02-11

#### Added
- The following options have been added in `Restivus.configure()` to allow for custom user
  authentication on endpoints (see [Configuration Options] for a much more detailed breakdown):
    - `auth.token`: The path to the auth token in the `Meteor.user` document
    - `auth.user`: A function providing one of two levels of authentication, depending on the data
      it returns. Once the user authentication completes successfully, the authenticated user and
      their ID will be attached to the [endpoint context].

#### Changed
- README
  - Add `auth.token` and `auth.user` to [Configuration Options]


## [v0.5.7] - 2015-02-02

#### Fixed
- Resolve and configure endpoints in Route.addToApi() instead of Route constructor so that endpoints
  are never configured until the API has been configured (with Restivus.configure()). This was
  causing unexpected behavior in routes that were added before the API was configured, such as
  authentication not being checked when necessary (so this.user and this.userId were undefined in
  authenticated endpoints).

#### Changed
- README
  - Update [Quick Start] examples so Restivus is configured and built from within the
    Meteor.startup() callback
  - Add "Important!" note in the [Configuration][configuration options] and [Defining Routes]
    sections that these must be done within the Meteor.startup() callback


## [v0.5.6] - 2015-01-31

#### Fixed
- Issue #2: Make Restivus.\_initAuth() private only by convention for proper context. Context was
  accidentally altered when refactoring Restivus into a class in latest update.


## [v0.5.5] - 2015-01-30

#### Added
- User role permissions for limiting access to endpoints (works alongside the `alanning:roles`
  package)

#### Changed
- Resolve and configure endpoints during Route construction, to prevent a bunch of unnecessary
  processing every time an endpoint was being accessed. This should yield at least a minor
  performance gain on all endpoints.
- Refactor Route and Restivus into CoffeeScript classes
- README
  - Add info on setting up role permissions to [Route Options] and [Defining Endpoints] sections
  - Update [Quick Start] example to show definition of role permissions on an endpoint


## [v0.5.4] - 2015-01-27

#### Fixed
- Issue #1: The default api path ('api/') is used if no apiPath is provided in Restivus.configure() (would
  previously crash Meteor).
- Only a `config.apiPath` that is missing the trailing '/' will have it appended during API
  configuration


## [v0.5.3] - 2015-01-15

#### Fixed
- Context in onLoggedIn and onLoggedOut hooks is now the same as within an
  [authenticated endpoint][endpoint context]

#### Added
- Access `this.userId` within authenticated endpoints

#### Changed
- README
  - Add `this.userId` to [Endpoint Context]
  - [Specify context][configuration options] in `onLoggedIn` and `onLoggedOut` hooks


## [v0.5.2] - 2015-01-14

#### Fixed
- Prevent endpoint from being called if authentication fails (and return 401)

#### Added
- Support pretty JSON in API configuration

#### Changed
- README
  - Show endpoint object in 'Quick Start' code examples
  - Restructure topic hierarchy
  - Change 'Route Structure' section to 'Path Structure' and reword for consistent use of
    terminology
  - Add `prettyJson` to [Configuration Options]


## [v0.5.1] - 2015-01-10

#### Fixed
- `Content-Type` header in endpoint response will default to `text/json` if not overridden by user

#### Added
- Allow cross-domain requests to API from browsers (CORS-compliant)

#### Changed
- README
  - Clean up code examples
  - Add section on documenting API with apiDoc
  - Specify supported Meteor version
  - Add section on default http response configuration
  - Make it more readable in plain-text format
- Terminology (in code, comments, and README)
  - `Method`: The type of HTTP request (e.g., GET, PUT, POST, etc.)
  - `Endpoint`: The function executed when a request is made at a given path for a specific HTTP method
  - `Route`: A path and a set of endpoints


## [v0.5.0] - 2015-01-04
- Initial release



[v0.6.0]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.9...v0.6.0 "Version 0.6.0"
[v0.5.9]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.8...v0.5.9 "Version 0.5.9"
[v0.5.8]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.7...v0.5.8 "Version 0.5.8"
[v0.5.7]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.6...v0.5.7 "Version 0.5.7"
[v0.5.6]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.5...v0.5.6 "Version 0.5.6"
[v0.5.5]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.4...v0.5.5 "Version 0.5.5"
[v0.5.4]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.3...v0.5.4 "Version 0.5.4"
[v0.5.3]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.2...v0.5.3 "Version 0.5.3"
[v0.5.2]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.1...v0.5.2 "Version 0.5.2"
[v0.5.1]:  https://github.com/kahmali/meteor-restivus/compare/v0.5.0...v0.5.1 "Version 0.5.1"
[v0.5.0]:  https://github.com/kahmali/meteor-restivus/compare/d4ae97...v0.5.0 "Version 0.5.0"

[quick start]:                   https://github.com/kahmali/meteor-restivus#quick-start                 "Quick Start"
[defining routes]:               https://github.com/kahmali/meteor-restivus#defining-custom-routes      "Defining Custom Routes"
[defining collection routes]:    https://github.com/kahmali/meteor-restivus#defining-routes             "Defining Collection Routes"
[configuration options]:         https://github.com/kahmali/meteor-restivus#configuration-options       "Configuration Options"
[endpoint context]:              https://github.com/kahmali/meteor-restivus#endpoint-context            "Endpoint Context"
[defining endpoints]:            https://github.com/kahmali/meteor-restivus#defining-endpoints          "Defining Endpoints"
[route options]:                 https://github.com/kahmali/meteor-restivus#route-options               "Route Options"
[jsend]:                         http://labs.omniti.com/labs/jsend                                      "JSend REST API Standard"
